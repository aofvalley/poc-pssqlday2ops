### Dump and restore database (Local)
POST http://localhost:7071/api/workflow/dump-restore HTTP/1.1
Content-Type: application/json

{
  "pg_host_prod": "advpsqlfxuk",
  "pg_host_dev": "advpsqlfxukdev",
  "pg_database": "test01",
  "pg_user": "alfonsod",
  "pg_password": "securepassword123",
  "resource_group": "adv_data_rg",
  "storage_account": "advpsqlstorage",
  "storage_container": "backups"
}

### Dump and restore database (Function App)
POST https://pssqlapitest.azurewebsites.net/api/workflow/dump-restore?code={{function_key}} HTTP/1.1
Content-Type: application/json

{
  "pg_host_prod": "advpsqlfxuk",
  "pg_host_dev": "advpsqlfxukdev",
  "pg_database": "test01",
  "pg_user": "alfonsod",
  "pg_password": "securepassword123",
  "resource_group": "adv_data_rg",
  "storage_account": "advsatest",
  "storage_container": "backups"
}

### Check detailed workflow status (latest run) - Local
GET http://localhost:7071/api/workflow/status HTTP/1.1

### Check detailed workflow status (latest run) - Function App
GET https://pssqlapitest.azurewebsites.net/api/workflow/status?code={{function_key}} HTTP/1.1

### Check detailed workflow status (specific run) - Local
GET http://localhost:7071/api/workflow/status?run_id=12345678 HTTP/1.1

### Check detailed workflow status (specific run) - Function App
GET https://pssqlapitest.azurewebsites.net/api/workflow/status?run_id=12345678&code={{function_key}} HTTP/1.1

### Health check with system diagnostics - Local
GET http://localhost:7071/api/health HTTP/1.1

### Health check with system diagnostics - Function App
GET https://pssqlapitest.azurewebsites.net/api/health?code={{function_key}} HTTP/1.1

### Health check with system diagnostics - Function App (Azure API Management)
GET https://alfonsodapi.azure-api.net/dumprestore/api/health?code={{function_key}} HTTP/1.1

### Ver configuraci贸n actual - Local
GET http://localhost:7071/api/config HTTP/1.1

### Ver configuraci贸n actual - Function App
GET https://pssqlapitest.azurewebsites.net/api/config?code={{function_key}} HTTP/1.1

### cURL examples

# Health check
curl http://localhost:7071/api/health

# Ver configuraci贸n
curl http://localhost:7071/api/config

# Execute PostgreSQL dump and restore
curl -X POST http://localhost:7071/api/workflow/dump-restore \
  -H "Content-Type: application/json" \
  -d '{
    "pg_host_prod": "advpsqlfxuk",
    "pg_host_dev": "advpsqlfxukdev",
    "pg_database": "test01",
    "pg_user": "alfonsod",
    "pg_password": "securepassword123",
    "resource_group": "adv_data_rg",
    "storage_account": "advpsqlstorage",
    "storage_container": "backups"
  }'

# Check detailed status of latest workflow run
curl http://localhost:7071/api/workflow/status

# Check detailed status of a specific workflow run
curl http://localhost:7071/api/workflow/status?run_id=12345678


### cURL Function Apps examples

# Health check
curl https://pssqlapitest.azurewebsites.net/api/health?code={{function_key}}

# Ver configuraci贸n
curl https://pssqlapitest.azurewebsites.net/api/config?code={{function_key}}

# Execute PostgreSQL dump and restore
curl -X POST https://pssqlapitest.azurewebsites.net/api/workflow/dump-restore?code={{function_key}} \
  -H "Content-Type: application/json" \
  -d '{
    "pg_host_prod": "advpsqlfxuk",
    "pg_host_dev": "advpsqlfxukdev",
    "pg_database": "test01",
    "pg_user": "alfonsod",
    "pg_password": "securepassword123",
    "resource_group": "adv_data_rg",
    "storage_account": "advpsqlstorage",
    "storage_container": "backups"
  }'

# Check detailed status of latest workflow run
curl https://pssqlapitest.azurewebsites.net/api/workflow/status?code={{function_key}}

# Check detailed status of a specific workflow run
curl https://pssqlapitest.azurewebsites.net/api/workflow/status?run_id=12345678&code={{function_key}}